<%- include('./include/header')%>
  <title><%= title%></title>
</head>
<body>
  <div class="h2box">
    <h2><%= title%></h2>
  </div>
  <div class="formbox">
    <form onsubmit="return false;">
      <div class="form-group">
        <label for="exampleInputEmail1">Email address</label>
        <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email">
      </div>
      <div class="form-group">
        <label for="exampleInputEmail1">name</label>
        <input type="text" class="form-control" id="nameinput" placeholder="name">
      </div>
      <div class="form-group">
        <label for="exampleInputPassword1">Password</label>
        <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
      </div>
      
      <button type="submit" class="btn btn-danger" id="register">注册</button>
      <br>
      <a href="/">首页</a>
      
      <a href="/login" style="">登录</a>
    </form>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script>
    $("#register").on('click', function (event) {
      event.preventDefault();
      var email = $("#exampleInputEmail1").val()
      var name = $("#nameinput").val()
      var password = $("#exampleInputPassword1").val()
      var data = {
        "email": email,
        "name": name,
        "password": password
      }
      console.log(data);
      $.ajax({
        url: '/register',
        method:'post',
        data: data,
        success: function (res) {
          // console.log(res);
          if (res.code === 0) {
            alert(res.mesg);
          } else {
            window.location.href = '/login';
          }
        },
        error: function(err) {
          console.log(err)
        }
      })
    })
    </script>
</div>
</body>